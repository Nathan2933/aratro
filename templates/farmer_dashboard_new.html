{% extends "base.html" %}

{% block content %}
<div class="flex justify-between items-center mb-4">
    <h1>Farmer Dashboard</h1>
</div>

<div class="dashboard-stats">
    <div class="stat-card">
        <i class="fas fa-clock fa-2x mb-3"></i>
        <h3>
            {% set pending_count = 0 %}
            {% for req in requests %}
                {% if req.status == 'pending' %}
                    {% set pending_count = pending_count + 1 %}
                {% endif %}
            {% endfor %}
            {{ pending_count }}
        </h3>
        <p>Pending Requests</p>
    </div>
    <div class="stat-card">
        <i class="fas fa-warehouse fa-2x mb-3"></i>
        <h3>{{ warehouses|length }}</h3>
        <p>Nearby Warehouses</p>
    </div>
    <div class="stat-card">
        <i class="fas fa-check-circle fa-2x mb-3"></i>
        <h3>
            {% set completed_count = 0 %}
            {% for req in requests %}
                {% if req.status == 'approved' or req.status == 'completed' %}
                    {% set completed_count = completed_count + 1 %}
                {% endif %}
            {% endfor %}
            {{ completed_count }}
        </h3>
        <p>Completed Requests</p>
    </div>
</div>

<div class="flex gap-4 mt-6">
    <div class="card dashboard-option-card" style="flex: 1; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 6px rgba(0,0,0,0.1);" onclick="window.location.href='/create_request'">
        <div class="card-content text-center py-6 px-4">
            <i class="fas fa-plus-circle fa-5x mb-4" style="color: var(--primary-color);"></i>
            <h2 class="text-xl mb-3">Create New Request</h2>
            <p class="mb-4">Submit a new stock request to a warehouse</p>
            <a href="/create_request" class="btn btn-primary w-full">
                <i class="fas fa-plus"></i>
                Create Request
            </a>
        </div>
    </div>
    
    <div class="card dashboard-option-card" style="flex: 1; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 6px rgba(0,0,0,0.1);" onclick="window.location.href='/view_requests'">
        <div class="card-content text-center py-6 px-4">
            <i class="fas fa-list-alt fa-5x mb-4" style="color: var(--primary-color);"></i>
            <h2 class="text-xl mb-3">View Requests</h2>
            <p class="mb-4">View and manage your existing requests</p>
            <a href="/view_requests" class="btn btn-primary w-full">
                <i class="fas fa-eye"></i>
                View Requests
            </a>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Add hover effect to cards
    const cards = document.querySelectorAll('.dashboard-option-card');
    cards.forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-5px)';
            this.style.boxShadow = '0 10px 20px rgba(0,0,0,0.1)';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0)';
            this.style.boxShadow = '0 4px 6px rgba(0,0,0,0.1)';
        });
    });
});
</script>
{% endblock %}
